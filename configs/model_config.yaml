# Settings for instantiating the model architecture/checkpoint behavior.
model: # Model Settings
  model_type: "cond_px_dif" # "cond_px_dif" for conditional diffusion, "px_dif" for unconditional (Depreciated).
  resume_checkpoint: false # false/null starts from scratch; set to a .ckpt path to continue training.
  generated_channels: 1 # Number of channels the model predicts (target y channels).
  condition_channels: 2 # Total conditioning channels passed into conditional model (data + mask channels).
  condition_mask_channels: 1 # How many of condition_channels are mask channels (excluded from normalization).
  clamp_known_pixels: false # If true, inpainting-style sampling clamps known pixels each diffusion step for generation stability.
  mask_loss_with_valid_pixels: false # If true, loss is computed only over valid pixels from the mask.

  coord_conditioning:
    enabled: true # Enable patch-center coordinate conditioning via FiLM.
    encoding: "unit_sphere" # "unit_sphere", "sincos", or "raw".
    embed_dim: null # If null, defaults to unet.dim.

  unet: # Denoiser backbone (ConvNeXt U-Net) settings.
    dim: 64 # Base channel width of U-Net.
    dim_mults: [1, 2, 4, 8] # Per-stage width multipliers; length controls U-Net depth.
    with_time_emb: true # Enable timestep embeddings in the denoiser.
    output_mean_scale: false # Optional output mean correction used by some diffusion variants.
    residual: false # If true, predicts a residual added to input.
