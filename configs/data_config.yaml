dataset:
  core:
    dataset_variant: "ostia" # Options: "eo_4band" (legacy EO from band-0 in y_npy) or "ostia" (EO from OSTIA tiles).
    dataloader_type: "light" # "raw" (NetCDF on-the-fly) or "light" (CSV + saved y_npy patches).
  source:
    #root_dir: "/data1/datasets/depth/monthy/" # Directory containing source .nc files.
    #index_path: "data/patch_index.parquet" # Cached tile index path (.parquet or .csv).
    light_index_csv: "/work/data/depth/4_bands_v2/patch_index_with_ostia_overlap.csv" # For "ostia": use OSTIA overlap CSV in /work/data/depth/4_bands_v2 (with sibling ostia_npy/). For "eo_4band": use patch_index_with_paths_split.csv.
    bands: ["thetao"] # Variables/bands to extract and write when exporting patches to disk (order is preserved).
    edge_size: 128 # Patch size (pixels) for each tile, also used as stride (non-overlapping tiles).
  validity:
    max_nodata_fraction: 0.15 # Max invalid/nodata ratio allowed per tile when enforce_validity=true.
    nan_fill_value: 0.0 # Fill value for invalid/land pixels before tensor conversion.
    valid_from_fill_value: true # Light mode: infer validity mask from standardized fill value.
    enforce_validity: true # Drop indexed tiles with too much nodata based on max_nodata_fraction.
  degradation:
    mask_fraction: 0.975 # Fraction of pixels hidden to create sparse conditioning input.
    mask_strategy: "tracks" # Corruption strategy: "tracks" (continuous submarine-like streaks) or legacy "rectangles".
    mask_patch_min: 2 # Minimum rectangle patch side length for legacy "rectangles" strategy (pixels).
    mask_patch_max: 5 # Maximum rectangle patch side length for legacy "rectangles" strategy (pixels).
  conditioning:
    eo_dropout_prob: 0.50 # Probability to zero EO conditioning per sample (applies to train and val).
    eo_random_scale_enabled: false # If true, add a random EO offset in [-2.0, 2.0] temperature units.
    eo_speckle_noise_enabled: true # If true, apply multiplicative speckle noise (clamped to [0.9, 1.1]) on EO.
  augmentation:
    enable_transform: false # Apply random geometric augmentation.
  output:
    x_return_mode: "currupted_plus_mask" # "corrputed" or "currupted_plus_mask".
    return_info: false # Return per-sample metadata dict under batch["info"].
    return_coords: true # Return patch-center coords under batch["coords"].
  runtime:
    rebuild_index: false # Rebuild tile index from raw files on startup.
    random_seed: 7 # Seed used for split and stochastic dataset operations where applicable.


split:
  val_fraction: 0.2 # Fraction of dataset reserved for validation.
