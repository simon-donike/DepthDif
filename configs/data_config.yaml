dataset:
  core:
    dataset_variant: "eo_4band" # Selects SurfaceTempPatch4BandsLightDataset in train.py.
    dataloader_type: "light" # "raw" (NetCDF on-the-fly) or "light" (CSV + saved y_npy patches).
  source:
    #root_dir: "/data1/datasets/depth/monthy/" # Directory containing source .nc files.
    #index_path: "data/patch_index.parquet" # Cached tile index path (.parquet or .csv).
    light_index_csv: "/work/data/depth/4_bands_v2/patch_index_with_paths_split.csv" # Used when dataloader_type="light".
    bands: ["thetao"] # Variables/bands to extract and write when exporting patches to disk (order is preserved).
    edge_size: 128 # Patch size (pixels) for each tile, also used as stride (non-overlapping tiles).
  validity:
    max_nodata_fraction: 0.15 # Max invalid/nodata ratio allowed per tile when enforce_validity=true.
    nan_fill_value: 0.0 # Fill value for invalid/land pixels before tensor conversion.
    valid_from_fill_value: true # Light mode: infer validity mask from standardized fill value.
    enforce_validity: true # Drop indexed tiles with too much nodata based on max_nodata_fraction.
  degradation:
    mask_fraction: 0.975 # Fraction of pixels hidden to create sparse conditioning input.
    mask_strategy: "tracks" # Corruption strategy: "tracks" (default) or legacy "rectangles".
    mask_patch_min: 2 # Minimum patch side length for corruption (pixels).
    mask_patch_max: 5 # Maximum patch side length for corruption (pixels).
    track_count_min: 2 # Minimum number of trajectory tracks sampled per patch.
    track_count_max: 8 # Maximum number of trajectory tracks sampled per patch.
    track_width_min: 1 # Minimum track brush width in pixels.
    track_width_max: 4 # Maximum track brush width in pixels.
    track_step_min: 1 # Minimum trajectory step length in pixels.
    track_step_max: 3 # Maximum trajectory step length in pixels.
    track_turn_std_deg: 18.0 # Stddev of random turn angle (degrees) for trajectory walk.
    track_heading_persistence: 0.85 # Heading inertia in [0,1], higher = smoother turns.
    track_seed_mode: "per_sample_random" # Current supported trajectory randomness mode.
  conditioning:
    eo_dropout_prob: 0.50 # Probability to zero EO conditioning per sample (applies to train and val).
    eo_random_scale_enabled: false # If true, multiply EO by a random scalar in [0.9, 1.1].
    eo_speckle_noise_enabled: true # If true, apply multiplicative speckle noise (clamped to [0.9, 1.1]) on EO.
  augmentation:
    enable_transform: false # Apply random geometric augmentation.
  output:
    x_return_mode: "currupted_plus_mask" # "corrputed" or "currupted_plus_mask".
    return_info: false # Return per-sample metadata dict under batch["info"].
    return_coords: true # Return patch-center coords under batch["coords"].
  runtime:
    rebuild_index: false # Rebuild tile index from raw files on startup.
    random_seed: 7 # Seed used for split and stochastic dataset operations where applicable.


split:
  val_fraction: 0.2 # Fraction of dataset reserved for validation.
